<html>
<head>
  <meta charset="utf-8"/>
  <title>D3.js</title>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.18/p5.min.js">
  </script>

  <style type="text/css">
    body {
    cursor:crosshair;
      padding:0;
      margin:0;
      background-color:#FFF;
      font-family: 'Circular Std', sans-serif;
      letter-spacing: 0px;
      color:black;

      -webkit-font-smoothing: antialiased;
         -moz-font-smoothing: antialiased;
           -o-font-smoothing: antialiased;
              font-smoothing: antialiased;
    }
    text {
      font-size: 20px;
    }

    a, a:link, a:visited {
      color: black;
      text-decoration: none;
      -webkit-transition: opacity 1s ease;
      -moz-transition: opacity 1s ease;
      -o-transition: opacity 1s ease;
      transition: opacity 1s ease;
    }

    a:hover, a:active {
      opacity: .5;
    }

    .back:before {
      content:"\2190 \2003";
    }

  .axis path,
  .axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
  }

  .axis line {
    length: 400px;
  }

  text {
    font-family: 'Circular Std', sans-serif;
    font-size: 11px;
  }

  line {
    stroke-width:1;
    stroke: black;
    shape-rendering: crispEdges;
    opacity: .2;
  }

  </style>
</head>

<body>
<div class="return-notification" id="return-notification" style="z-index: 997; position: fixed; width:100%; top:45%; text-align: center; margin:0 auto; font-family:'Circular Std', Helvetica, serif; font-size:36px; letter-spacing:0px; display:none; opacity:0;">
    <p id="return-notification-message" style="font-weight:800; margin: 0;">
      Returning to overview in 10 seconds
    </p>
    <p style="font-weight:100; margin: 0; font-size:20px">
      Move the cursor to stay on the page
    </p>
  </div>
  <div class="loading" id="loading" style="z-index: 998; position: fixed; width:100%; top:45%; text-align: center; margin:0 auto; font-family:'Circular Std', Helvetica, serif; font-size:36px; letter-spacing:0px;">
    <p style="font-weight:800; margin: 0">
      Loading data...
    </p>
  </div>
  <div class="info" id="info" style="z-index: 999; position: fixed; width:100%; bottom:0; text-align: center; margin:2em auto 6em auto; font-family:'Circular Std', Helvetica, serif; font-size:16px; letter-spacing:0px;">
    <p style="font-weight:800; margin: 0;">
      Stellar evolution and the Hertzsprung-Russell diagram [003].
    </p>
    <p style="font-weight:100; margin: 0;">
      Attempts at an interactive Hertzsprung-Russell diagram, that explains the evolutionary path of stars.
    </p>
    <p style="font-weight:100; margin: 0;">
      Click on stars to open detailed view.
    </p>
    <p style="font-weight:100; margin: 0;">
      <br>
      <a class="back" href="javascript:void(0)" onClick="returnNow();">Return to overview</a>
    </p>
  </div>
  <div id="svg-wrapper" style="z-index: -500">
  </div>
  <script type="text/javascript">

  var readySetGo = false;

    // var Teff = [4.4096, 4.3855, 4.3576, 4.3251, 4.2865, 4.2380, 4.1766, 4.0928, 4.0376, 3.9658, 3.9297, 3.8855, 3.8355, 3.7965, 3.7514, 3.7016];

    // var L = [3.7600, 3.6118, 3.4433, 3.2380, 3.0184, 2.7381, 2.3815, 1.9087, 1.6002, 1.2157, 1.0298, 0.8186, 0.5562, 0.2325, -0.1523, -0.5742];
    
    // var R = [3.8434, 3.6213, 3.3916, 3.1472, 2.8860, 2.6122, 2.2992, 1.9620, 1.7737, 1.5858, 1.5120, 1.4532, 1.3526, 1.1157, 0.8813, 0.6820];

    // var M = [10, 9, 8, 7, 6, 5, 4, 3, 2.5, 2, 1.8, 1.6, 1.4, 1.2, 1, 0.8];

    // var dataset = [];
    
    

    var dataset = [
        0.8000, -0.612, 3.687,
        0.8100, -0.589, 3.691,
        0.8200, -0.566, 3.695,
        0.8300, -0.544, 3.699,
        0.8400, -0.522, 3.702,
        0.8500, -0.500, 3.706,
        0.8600, -0.478, 3.710,
        0.8700, -0.457, 3.713,
        0.8800, -0.436, 3.717,
        0.8900, -0.415, 3.720,
        0.9000, -0.394, 3.724,
        0.9100, -0.370, 3.727,
        0.9200, -0.346, 3.730,
        0.9300, -0.322, 3.732,
        0.9400, -0.299, 3.735,
        0.9500, -0.275, 3.738,
        0.9600, -0.253, 3.741,
        0.9700, -0.230, 3.743,
        0.9800, -0.207, 3.746,
        0.9900, -0.185, 3.748,
        1.0000, -0.163, 3.751,
        1.0100, -0.142, 3.753,
        1.0200, -0.120, 3.756,
        1.0300, -0.099, 3.758,
        1.0400, -0.079, 3.760,
        1.0500, -0.058, 3.763,
        1.0600, -0.038, 3.765,
        1.0700, -0.017, 3.767,
        1.0800,  0.003, 3.770,
        1.0900,  0.022, 3.772,
        1.1000,  0.042, 3.774,
        1.1100,  0.061, 3.776,
        1.1200,  0.081, 3.778,
        1.1300,  0.100, 3.781,
        1.1400,  0.119, 3.783,
        1.1500,  0.138, 3.785,
        1.1600,  0.156, 3.787,
        1.1700,  0.175, 3.789,
        1.1800,  0.193, 3.791,
        1.1900,  0.211, 3.793,
        1.2000,  0.229, 3.795,
        1.2100,  0.247, 3.797,
        1.2200,  0.265, 3.799,
        1.2300,  0.282, 3.801,
        1.2400,  0.300, 3.803,
        1.2500,  0.317, 3.805,
        1.2600,  0.333, 3.807,
        1.2700,  0.348, 3.809,
        1.2800,  0.364, 3.811,
        1.2900,  0.379, 3.813,
        1.3000,  0.394, 3.815,
        1.3100,  0.409, 3.817,
        1.3200,  0.424, 3.819,
        1.3300,  0.439, 3.821,
        1.3400,  0.454, 3.823,
        1.3500,  0.469, 3.825,
        1.3600,  0.483, 3.827,
        1.3700,  0.497, 3.829,
        1.3800,  0.512, 3.831,
        1.3900,  0.526, 3.832,
        1.4000,  0.540, 3.834,
        1.4100,  0.554, 3.836,
        1.4200,  0.568, 3.838,
        1.4300,  0.582, 3.840,
        1.4400,  0.596, 3.841,
        1.4500,  0.609, 3.843,
        1.4600,  0.623, 3.845,
        1.4700,  0.636, 3.847,
        1.4800,  0.650, 3.849,
        1.4900,  0.663, 3.850,
        1.5000,  0.676, 3.852,
        1.5100,  0.689, 3.855,
        1.5200,  0.701, 3.857,
        1.5300,  0.714, 3.860,
        1.5400,  0.726, 3.862,
        1.5500,  0.739, 3.865,
        1.5600,  0.751, 3.867,
        1.5700,  0.763, 3.870,
        1.5800,  0.776, 3.872,
        1.5900,  0.788, 3.875,
        1.6000,  0.800, 3.877,
        1.6100,  0.812, 3.880,
        1.6200,  0.824, 3.882,
        1.6300,  0.835, 3.885,
        1.6400,  0.847, 3.887,
        1.6500,  0.859, 3.889,
        1.6600,  0.870, 3.892,
        1.6700,  0.882, 3.894,
        1.6800,  0.893, 3.896,
        1.6900,  0.905, 3.899,
        1.7000,  0.916, 3.901,
        1.7100,  0.927, 3.903,
        1.7200,  0.937, 3.905,
        1.7300,  0.948, 3.907,
        1.7400,  0.958, 3.909,
        1.7500,  0.968, 3.911,
        1.7600,  0.979, 3.913,
        1.7700,  0.989, 3.915,
        1.7800,  0.999, 3.917,
        1.7900,  1.009, 3.919,
        1.8000,  1.019, 3.921,
        1.8100,  1.029, 3.923,
        1.8200,  1.039, 3.925,
        1.8300,  1.049, 3.927,
        1.8400,  1.059, 3.929,
        1.8500,  1.068, 3.931,
        1.8600,  1.078, 3.933,
        1.8700,  1.088, 3.934,
        1.8800,  1.097, 3.936,
        1.8900,  1.107, 3.938,
        1.9000,  1.117, 3.940,
        1.9100,  1.126, 3.942,
        1.9200,  1.135, 3.944,
        1.9300,  1.145, 3.946,
        1.9400,  1.154, 3.947,
        1.9500,  1.163, 3.949,
        1.9600,  1.173, 3.951,
        1.9700,  1.182, 3.953,
        1.9800,  1.191, 3.954,
        1.9900,  1.200, 3.956,
        2.0000,  1.209, 3.958,
        2.0100,  1.218, 3.960,
        2.0200,  1.226, 3.961,
        2.0300,  1.235, 3.963,
        2.0400,  1.244, 3.964,
        2.0500,  1.252, 3.966,
        2.0600,  1.261, 3.968,
        2.0700,  1.269, 3.969,
        2.0800,  1.278, 3.971,
        2.0900,  1.286, 3.972,
        2.1000,  1.294, 3.974,
        2.1100,  1.303, 3.976,
        2.1200,  1.311, 3.977,
        2.1300,  1.319, 3.979,
        2.1400,  1.328, 3.980,
        2.1500,  1.336, 3.982,
        2.1600,  1.344, 3.983,
        2.1700,  1.352, 3.985,
        2.1800,  1.360, 3.986,
        2.1900,  1.368, 3.988,
        2.2000,  1.376, 3.989,
        2.2100,  1.384, 3.991,
        2.2200,  1.392, 3.992,
        2.2300,  1.400, 3.994,
        2.2400,  1.408, 3.995,
        2.2500,  1.415, 3.997,
        2.2600,  1.423, 3.998,
        2.2700,  1.431, 3.999,
        2.2800,  1.439, 4.001,
        2.2900,  1.446, 4.002,
        2.3000,  1.454, 4.004,
        2.3100,  1.461, 4.005,
        2.3200,  1.469, 4.007,
        2.3300,  1.477, 4.008,
        2.3400,  1.484, 4.009,
        2.3500,  1.492, 4.011,
        2.3600,  1.499, 4.012,
        2.3700,  1.506, 4.014,
        2.3800,  1.514, 4.015,
        2.3900,  1.521, 4.016,
        2.4000,  1.528, 4.018,
        2.4100,  1.536, 4.019,
        2.4200,  1.543, 4.020,
        2.4300,  1.550, 4.022,
        2.4400,  1.557, 4.023,
        2.4500,  1.565, 4.024,
        2.4600,  1.572, 4.026,
        2.4700,  1.579, 4.027,
        2.4800,  1.586, 4.028,
        2.4900,  1.593, 4.030,
        2.5000,  1.600, 4.031,
        2.5100,  1.607, 4.032,
        2.5200,  1.614, 4.033,
        2.5300,  1.620, 4.035,
        2.5400,  1.627, 4.036,
        2.5500,  1.634, 4.037,
        2.5600,  1.640, 4.038,
        2.5700,  1.647, 4.040,
        2.5800,  1.653, 4.041,
        2.5900,  1.660, 4.042,
        2.6000,  1.666, 4.043,
        2.6100,  1.673, 4.044,
        2.6200,  1.679, 4.046,
        2.6300,  1.686, 4.047,
        2.6400,  1.692, 4.048,
        2.6500,  1.699, 4.049,
        2.6600,  1.705, 4.050,
        2.6700,  1.711, 4.052,
        2.6800,  1.718, 4.053,
        2.6900,  1.724, 4.054,
        2.7000,  1.730, 4.055,
        2.7100,  1.737, 4.056,
        2.7200,  1.743, 4.057,
        2.7300,  1.749, 4.059,
        2.7400,  1.755, 4.060,
        2.7500,  1.762, 4.061,
        2.7600,  1.768, 4.062,
        2.7700,  1.774, 4.063,
        2.7800,  1.780, 4.064,
        2.7900,  1.786, 4.065,
        2.8000,  1.792, 4.066,
        2.8100,  1.798, 4.068,
        2.8200,  1.804, 4.069,
        2.8300,  1.810, 4.070,
        2.8400,  1.816, 4.071,
        2.8500,  1.822, 4.072,
        2.8600,  1.828, 4.073,
        2.8700,  1.834, 4.074,
        2.8800,  1.840, 4.075,
        2.8900,  1.846, 4.076,
        2.9000,  1.852, 4.077,
        2.9100,  1.857, 4.078,
        2.9200,  1.863, 4.080,
        2.9300,  1.869, 4.081,
        2.9400,  1.875, 4.082,
        2.9500,  1.881, 4.083,
        2.9600,  1.886, 4.084,
        2.9700,  1.892, 4.085,
        2.9800,  1.898, 4.086,
        2.9900,  1.903, 4.087,
        3.0000,  1.909, 4.088,
        3.0100,  1.915, 4.089,
        3.0200,  1.920, 4.090,
        3.0300,  1.925, 4.091,
        3.0400,  1.931, 4.092,
        3.0500,  1.936, 4.093,
        3.0600,  1.942, 4.094,
        3.0700,  1.947, 4.095,
        3.0800,  1.953, 4.096,
        3.0900,  1.958, 4.097,
        3.1000,  1.963, 4.098,
        3.1100,  1.969, 4.099,
        3.1200,  1.974, 4.100,
        3.1300,  1.979, 4.101,
        3.1400,  1.984, 4.101,
        3.1500,  1.990, 4.102,
        3.1600,  1.995, 4.103,
        3.1700,  2.000, 4.104,
        3.1800,  2.005, 4.105,
        3.1900,  2.011, 4.106,
        3.2000,  2.016, 4.107,
        3.2100,  2.021, 4.108,
        3.2200,  2.026, 4.109,
        3.2300,  2.031, 4.110,
        3.2400,  2.036, 4.111,
        3.2500,  2.041, 4.112,
        3.2600,  2.047, 4.113,
        3.2700,  2.052, 4.113,
        3.2800,  2.057, 4.114,
        3.2900,  2.062, 4.115,
        3.3000,  2.067, 4.116,
        3.3100,  2.072, 4.117,
        3.3200,  2.077, 4.118,
        3.4200,  2.126, 4.127,
        3.5200,  2.173, 4.135,
        3.6200,  2.220, 4.144,
        3.7200,  2.265, 4.152,
        3.8200,  2.309, 4.159,
        3.9200,  2.352, 4.167,
        4.0200,  2.393, 4.174,
        4.1200,  2.432, 4.181,
        4.2200,  2.470, 4.188,
        4.3200,  2.507, 4.194,
        4.4200,  2.544, 4.201,
        4.5200,  2.579, 4.207,
        4.6200,  2.614, 4.213,
        4.7200,  2.648, 4.219,
        4.8200,  2.682, 4.225,
        4.9200,  2.714, 4.231,
        5.0200,  2.746, 4.236,
        5.1200,  2.776, 4.241,
        5.2200,  2.806, 4.246,
        5.3200,  2.835, 4.251,
        5.4200,  2.864, 4.256,
        5.5200,  2.892, 4.260,
        5.6200,  2.920, 4.265,
        5.7200,  2.947, 4.269,
        5.8200,  2.973, 4.274,
        5.9200,  3.000, 4.278,
        6.0200,  3.025, 4.282,
        6.1200,  3.051, 4.287,
        6.2200,  3.075, 4.291,
        6.3200,  3.100, 4.295,
        6.4200,  3.124, 4.299,
        6.5200,  3.148, 4.303,
        6.6200,  3.171, 4.307,
        6.7200,  3.194, 4.311,
        6.8200,  3.217, 4.314,
        6.9200,  3.239, 4.318,
        7.0200,  3.261, 4.322,
        7.1200,  3.281, 4.325,
        7.2200,  3.301, 4.329,
        7.3200,  3.321, 4.332,
        7.4200,  3.340, 4.335,
        7.5200,  3.360, 4.339,
        7.6200,  3.379, 4.342,
        7.7200,  3.397, 4.345,
        7.8200,  3.416, 4.348,
        7.9200,  3.434, 4.351,
        8.0200,  3.452, 4.355,
        8.1200,  3.470, 4.358,
        8.2200,  3.487, 4.361,
        8.3200,  3.504, 4.364,
        8.4200,  3.522, 4.367,
        8.5200,  3.538, 4.369,
        8.6200,  3.555, 4.372,
        8.7200,  3.572, 4.375,
        8.8200,  3.588, 4.378,
        8.9200,  3.604, 4.381,
        9.0200,  3.620, 4.384,
        9.1200,  3.635, 4.386,
        9.2200,  3.650, 4.388,
        9.3200,  3.665, 4.391,
        9.4200,  3.680, 4.393,
        9.5200,  3.694, 4.396,
        9.6199,  3.709, 4.398,
        9.7199,  3.723, 4.400,
        9.8199,  3.737, 4.403,
        9.9199,  3.751, 4.405,
       10.0199,  3.765, 4.407,
       10.1199,  3.778, 4.410,
       10.2199,  3.792, 4.412,
       10.3199,  3.805, 4.414,
       10.4199,  3.819, 4.416,
       10.5199,  3.832, 4.418,
       10.6198,  3.845, 4.420,
       10.7198,  3.858, 4.423,
       10.8198,  3.871, 4.425,
       10.9198,  3.883, 4.427,
       11.0198,  3.896, 4.429,
       11.1198,  3.908, 4.431,
       11.2198,  3.920, 4.433,
       11.3198,  3.933, 4.435,
       11.4198,  3.945, 4.437,
       11.5198,  3.957, 4.439,
       11.6197,  3.969, 4.441,
       11.7197,  3.981, 4.443,
       11.8197,  3.992, 4.445,
       11.9197,  4.004, 4.446,
       12.0197,  4.015, 4.448,
       12.1196,  4.026, 4.450,
       12.2196,  4.037, 4.452,
       12.3195,  4.047, 4.453,
       12.4195,  4.058, 4.455,
       12.5194,  4.068, 4.456,
       12.6194,  4.078, 4.458,
       12.7193,  4.089, 4.459,
       12.8193,  4.099, 4.461,
       12.9192,  4.109, 4.463,
       13.0192,  4.119, 4.464,
       13.1191,  4.129, 4.466,
       13.2191,  4.139, 4.467,
       13.3190,  4.149, 4.469,
       13.4190,  4.158, 4.470,
       13.5189,  4.168, 4.472,
       13.6189,  4.178, 4.473,
       13.7188,  4.187, 4.474,
       13.8188,  4.197, 4.476,
       13.9187,  4.206, 4.477,
       14.0187,  4.215, 4.479,
       14.1186,  4.224, 4.480,
       14.2185,  4.234, 4.481,
       14.3185,  4.243, 4.483,
       14.4184,  4.252, 4.484,
       14.5184,  4.261, 4.486,
       14.6183,  4.270, 4.487,
       14.7183,  4.279, 4.488,
       14.8182,  4.287, 4.490,
       14.9181,  4.296, 4.491,
       15.0181,  4.305, 4.492,
       15.1180,  4.313, 4.493,
       15.2180,  4.321, 4.495,
       15.3179,  4.328, 4.496,
       15.4179,  4.336, 4.497,
       15.5179,  4.344, 4.498,
       15.6178,  4.352, 4.499,
       15.7178,  4.360, 4.500,
       15.8177,  4.367, 4.502,
       15.9177,  4.375, 4.503,
       16.0176,  4.382, 4.504,
       16.1176,  4.390, 4.505,
       16.2175,  4.397, 4.506,
       16.3175,  4.405, 4.507,
       16.4174,  4.412, 4.508,
       16.5174,  4.419, 4.509,
       16.6173,  4.427, 4.511,
       16.7173,  4.434, 4.512,
       16.8172,  4.441, 4.513,
       16.9172,  4.448, 4.514,
       17.0171,  4.455, 4.515,
       17.1171,  4.462, 4.516,
       17.2170,  4.469, 4.517,
       17.3170,  4.476, 4.518,
       17.4169,  4.483, 4.519,
       17.5169,  4.490, 4.520,
       17.6168,  4.497, 4.521,
       17.7167,  4.504, 4.522,
       17.8167,  4.511, 4.523,
       17.9166,  4.518, 4.524,
       18.0166,  4.524, 4.525,
       18.1165,  4.531, 4.526,
       18.2165,  4.538, 4.527,
       18.3164,  4.544, 4.528,
       18.4164,  4.551, 4.529,
       18.5163,  4.557, 4.530,
       18.6163,  4.564, 4.531,
       18.7162,  4.570, 4.532,
       18.8162,  4.577, 4.533,
       18.9161,  4.583, 4.534,
       19.0160,  4.589, 4.535,
       19.1160,  4.596, 4.536,
       19.2159,  4.602, 4.537,
       19.3159,  4.608, 4.538,
       19.4158,  4.615, 4.539,
       19.5158,  4.621, 4.540,
       19.6157,  4.627, 4.541,
       19.7157,  4.633, 4.541,
       19.8156,  4.639, 4.542,
       19.9155,  4.645, 4.543,
       20.0155,  4.651, 4.544,
       20.1155,  4.657, 4.545,
       20.2155,  4.662, 4.546,
       20.3156,  4.668, 4.546,
       20.4156,  4.673, 4.547,
       20.5156,  4.678, 4.548,
       20.6156,  4.684, 4.549,
       20.7156,  4.689, 4.550,
       20.8157,  4.694, 4.550,
       20.9157,  4.700, 4.551,
       21.0157,  4.705, 4.552,
       21.1157,  4.710, 4.553,
       21.2157,  4.716, 4.553,
       21.3158,  4.721, 4.554,
       21.4158,  4.726, 4.555,
       21.5158,  4.731, 4.555,
       21.6158,  4.736, 4.556,
       21.7159,  4.741, 4.557,
       21.8159,  4.746, 4.558,
       21.9159,  4.751, 4.558,
       22.0159,  4.757, 4.559,
       22.1160,  4.762, 4.560,
       22.2160,  4.767, 4.561,
       23.2162,  4.815, 4.567,
       24.2165,  4.862, 4.574,
       25.2166,  4.906, 4.580,
       26.2163,  4.945, 4.585,
       27.2159,  4.983, 4.590,
       28.2155,  5.020, 4.595,
       29.2151,  5.055, 4.599,
       30.2147,  5.089, 4.604,
       31.2143,  5.122, 4.608,
       32.2139,  5.154, 4.612,
       33.2134,  5.185, 4.616,
       34.2130,  5.215, 4.620,
       35.2126,  5.244, 4.623,
       36.2121,  5.272, 4.627,
       37.2117,  5.300, 4.631,
       38.2112,  5.327, 4.634,
       39.2108,  5.353, 4.637,
       40.2103,  5.378, 4.641,
       41.2099,  5.399, 4.643,
       42.2094,  5.420, 4.646,
       43.2089,  5.441, 4.648,
       44.2085,  5.461, 4.651,
       45.2080,  5.480, 4.653,
       46.2075,  5.500, 4.655,
       47.2071,  5.518, 4.658,
       48.2066,  5.537, 4.660,
       49.2061,  5.555, 4.662,
       50.2056,  5.572, 4.664,
       51.2051,  5.589, 4.666,
       52.2046,  5.606, 4.668,
       53.2041,  5.623, 4.670,
       54.2036,  5.639, 4.672,
       55.2031,  5.655, 4.674,
       56.2026,  5.671, 4.676,
       57.2021,  5.686, 4.678,
       58.2015,  5.702, 4.680,
       59.2010,  5.717, 4.682,
       60.2005,  5.731, 4.683,
       61.2000,  5.744, 4.684,
       62.1996,  5.757, 4.685,
       63.1991,  5.770, 4.686,
       64.1987,  5.782, 4.687,
       65.1982,  5.795, 4.688,
       66.1977,  5.807, 4.689,
       67.1973,  5.819, 4.690,
       68.1968,  5.830, 4.691,
       69.1963,  5.842, 4.692,
       70.1959,  5.854, 4.693,
       71.1954,  5.865, 4.694,
       72.1949,  5.876, 4.695,
       73.1944,  5.887, 4.696,
       74.1940,  5.898, 4.696,
       75.1935,  5.908, 4.697,
       76.1930,  5.919, 4.698,
       77.1925,  5.929, 4.699,
       78.1920,  5.940, 4.700,
       79.1915,  5.950, 4.701,
       80.1911,  5.960, 4.701,
       81.1906,  5.970, 4.702,
       82.1901,  5.979, 4.703,
       83.1896,  5.989, 4.704,
       84.1891,  5.999, 4.704,
       85.1887,  6.008, 4.705,
       86.1885,  6.016, 4.706,
       87.1883,  6.024, 4.707,
       88.1881,  6.033, 4.707,
       89.1879,  6.041, 4.708,
       90.1877,  6.049, 4.709,
       91.1875,  6.056, 4.710,
       92.1873,  6.064, 4.710,
       93.1871,  6.072, 4.711,
       94.1869,  6.079, 4.712,
       95.1867,  6.087, 4.712,
       96.1865,  6.094, 4.713,
       97.1863,  6.102, 4.714,
       98.1862,  6.109, 4.714,
       99.1860,  6.116, 4.715,
      100.1858,  6.124, 4.716,
      101.1856,  6.131, 4.716,
      102.1855,  6.138, 4.717,
      103.1853,  6.145, 4.717,
      104.1851,  6.151, 4.718,
      105.1849,  6.158, 4.719,
      106.1848,  6.165, 4.719,
      107.1846,  6.172, 4.720,
      108.1844,  6.178, 4.720,
      109.1843,  6.185, 4.721,
      110.1841,  6.191, 4.722,
      111.1840,  6.198, 4.722,
      112.1838,  6.204, 4.723,
      113.1836,  6.211, 4.723,
      114.1835,  6.217, 4.724,
      115.1833,  6.223, 4.724,
      116.1832,  6.229, 4.725,
      117.1830,  6.235, 4.726,
      118.1829,  6.241, 4.726,
      119.1827,  6.247, 4.727,
      119.9626,  6.252, 4.727
    ];

    var M = [];
    var L = [];
    var Teff = [];


    // push values of dataset to arrays for each property (M, L, Teff)
    for (i = 0; i <= dataset.length; i = i+3) {
      M.push(parseFloat(dataset[i]))
    };

    for (i = 1; i <= dataset.length; i = i+3) {
      L.push(parseFloat(dataset[i]))
    };

    for (i = 2; i <= dataset.length; i = i+3) {
      Teff.push(parseFloat(dataset[i]))
    };

    // put brackets around every 3 values in dataset

    // for (var i = 0; i <= dataset.length; i++) {
    //   if (i % 3 === 0) {
    //   };
    // };

    var datasetTemp = [];

    // push each property back into array in right order
    for (i = 0; i < M.length; i++) {
      var datasetTempArray = [M[i], L[i], Teff[i]];
      var datasetTempArraySlice = datasetTempArray.slice();
      datasetTemp.push(datasetTempArraySlice);
    };
    dataset = datasetTemp;

    var w = window.innerWidth;
    var h = window.innerHeight;

    var padding = 30;

    //Get max/min values of data
    var max_Teff = d3.max(Teff);
    var min_Teff = d3.min(Teff);
    var max_L = d3.max(L);
    var min_L = d3.min(L);
    // var max_R = d3.max(R);
    // var min_R = d3.min(R);
    

    //Round min/max values 
    var maxRound_Teff = d3.round(max_Teff);
    var minRound_Teff = d3.round(min_Teff);
    var maxRound_L = d3.round(max_L);
    var minRound_L = d3.round(min_L);

    //Create the SVG Viewport
    var svgContainer = d3.select("#svg-wrapper").append("svg")
                                        .attr("width", w)
                                        .attr("height", h);

    //Define the Scale we will use for the TeffAxis (x)
    var TeffAxisScale = d3.scale.linear()
                                .domain([maxRound_Teff + 0.5, minRound_Teff -0.5])
                                .range([padding, w-padding]);

    //Define the Scale we will use for the LAxis (y)
    var LAxisScale = d3.scale.linear()
                             .domain([maxRound_L + 0.5, minRound_L - 0.5])
                             .range([padding, h-padding]);

    //Define the scale we will use for the R (size circles)
    // var RScale = d3.scale.linear()
    //                      .domain([max_R, min_R])
    //                      .range([10,2]);

    //Create scattered data in plot
    var circles = svgContainer.selectAll("circle")
                     .data(datasetTemp)
                     .enter()
                     .append("circle")
                     .attr("cx", function(d) {return TeffAxisScale(d[2]); })
                     .attr("cy", function(d) {return LAxisScale(d[1]); })
                     .attr("r", "1");

    // var text_M = svgContainer.selectAll("text")
    //                          .data(datasetTemp)
    //                          .enter()
    //                          .append("text")
    //                          .text( function(d) {return (d[0]);})
    //                          .attr("x", function(d) {return TeffAxisScale(d[2]) + 10})
    //                          .attr("y", function(d) {return LAxisScale(d[1]) - 10});

    var line_Lsolar = svgContainer.append("line")
                             .attr("x1", 0 + padding)
                             .attr("y1", LAxisScale(0))
                             .attr("x2", w - padding)
                             .attr("y2", LAxisScale(0))
                             .attr("class", "line line-lsolar");

    //Create the TeffAxis (x)
    var TeffAxis = d3.svg.axis()
                         .scale(TeffAxisScale)
                         .orient("bottom")
                         .ticks(5);
    
    //Create label on TeffAxis (x)
    var TeffAxisLabel = svgContainer.append("text")
                               .attr("class", "teff-label label")
                               .attr("x", w - (padding + 5))
                               .attr("y", h - (padding + 5))
                               .attr("text-anchor", "end")
                               .text("logTeff");

    //Create the LAxis (y)
    var LAxis = d3.svg.axis()
                      .scale(LAxisScale)
                      .orient("left")
                      .ticks(7);

    //Create label on LAxis (y)
    var LAxisLabel = svgContainer.append("text")
                           .attr("class", "l-label label")
                           .attr("x", padding + 5)
                           .attr("y", padding + 5)
                           .text("logL");
    
    //Create an SVG group Element for the TeffAxis elements and call the TeffAxis function (x)
    var TeffAxisGroup = svgContainer.append("g")
                                    .attr("class", "text teff-axis axis")
                                    .attr("transform", "translate(0," + (h - padding) + ")")
                                    .call(TeffAxis);

    //Create an SVG group Element for the TeffAxis elements and call the TeffAxis function (x)
    var LAxisGroup = svgContainer.append("g")
                                    .attr("class", "text l-axis axis")
                                    .attr("transform", "translate(" + padding + ", 0)")
                                    .call(LAxis);

  setTimeout(function() {
    ready();
    readySetGo = true;  
  }, 1000);

 var svg = d3.select("#svg-container");

  svg.style("-webkit-filter", "blur(" + 5 + "px)").style("opacity",.5);

    var returnTimer = 0;
    var returnCountdown = 0;
    var returnLink = 0;
    var returnNotification = d3.select('#return-notification');

document.body.addEventListener('mousemove', resetTimers);

function resetTimers() {
      clearTimeout(returnTimer);
      clearInterval(returnCountdown);
      clearTimeout(returnLink);
      countdown = 10;
      returnNotification.transition().duration(500).style("opacity", 0);
      setTimeout(function() {returnNotification.style("display", "none")}, 500);
      if (readySetGo) {
        ready();
      }
    };

    function ready() {
      document.getElementById('return-notification-message').innerHTML = "Returning to overview in 10 seconds";
      d3.select("#loading").transition().duration(500).style("opacity", 0);
      setTimeout(function() {d3.select("#loading").style("display", "none")}, 500);
      svg.transition().delay(0).duration(1000)
                         .style("-webkit-filter", "blur(" + 0 + "px)")
                         .style("opacity",1);
      d3.select("#info").transition().duration(500).style('opacity', 1);
      returnTimer = setTimeout(returnToHub, 20000);
    };

    function returnToHub() {
      returnNotification.style("display", "block").transition().duration(500)
                        .style("opacity", 1);
      svg.transition().delay(0).duration(10000).ease("linear-in-out")
                         .style("-webkit-filter", "blur(" + 5 + "px)")
                         .style("opacity",.2);
      d3.select("#info").transition().duration(8000).ease("linear-in-out")
                         .style('opacity', 0);

      var countdown = 10; 
      console.log(countdown);
      returnCountdown = setInterval(function() {
        countdown = countdown - 1;
        document.getElementById('return-notification-message').innerHTML = "Returning to overview in " + countdown + " seconds";
        console.log(countdown);
      }, 1000)
      returnLink = setTimeout(function() {returnNow();}, 10000)
}

function returnNow() {
    var oldURL = document.referrer;
    if (oldURL === "http://antonlecock.github.io/masterproject/hub/index.html") {
      window.history.back();
    } else {
      window.location.href = "http://antonlecock.github.io/masterproject/hub/index.html";
    }
  };

  </script>
</body>